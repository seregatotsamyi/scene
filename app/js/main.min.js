import{animation,animationReviews,animationEnd}from"./anim.js";window.onload=function(){"use strict";animation();let r={phone:!1,rating:!1,ratingOld:!1,review:!1,wishes:!1,newProject:!1,showAll:!1},n=document.querySelectorAll(".raiting__label"),e=document.querySelectorAll(".raiting__input");e.forEach((e,t)=>{e.addEventListener("change",()=>(t=>{let a=["_current","_gold"];n.forEach(e=>e.classList.remove(...a)),n[t].classList.add("_current");for(let e=0;e<=t;e++)n[e].classList.add("_gold");r.rating=document.querySelector('input[name="raiting"]:checked').value,_()})(t))});let t=document.querySelectorAll(".new-project__input"),i=document.querySelectorAll(".new-project__label");t.forEach((e,t)=>{e.addEventListener("change",()=>(e=>{i.forEach(e=>{e.classList.remove("_checked"),e.classList.remove("_error")}),i[e].classList.add("_checked"),r.newProject=document.querySelector('input[name="new-project"]:checked').value,m(!1)})(t))});let a=document.querySelector('.form__input[name="phone"]'),o=document.querySelector('.form__input[name="reviews"]'),s=document.querySelector('.form__input[name="reviews-bad"]'),l=document.querySelector('.form__input[name="wishes"]'),c=(e,t,a)=>{3<e.length?(r.review=!0,a&&(t.classList.remove("_error"),t.classList.add("_complete"))):(r.review=!1,a&&(t.classList.add("_error"),t.classList.remove("_complete")))},d=(e,t)=>{3<e.length?(r.wishes=!0,t&&(l.classList.remove("_error"),l.classList.add("_complete"))):(r.wishes=!1,t&&(l.classList.remove("_complete"),l.classList.add("_error")))},m=e=>{let t=!0;for(var a in r)if(!1===r[a])switch(t=!1,a){case"review":c(o.value,o,e),c(s.value,s,e);break;case"wishes":d("",e);break;case"newProject":null===document.querySelector('input[name="new-project"]:checked')&&e&&i.forEach(e=>{e.classList.remove("_checked"),e.classList.add("_error")})}return t?$(".form__btn").addClass("_active"):$(".form__btn").removeClass("_active"),t};a.addEventListener("change",()=>{var e,t;e=a.value,t=!0,16===e.length?(r.phone=!0,t&&(a.classList.remove("_error"),a.classList.add("_complete")),_()):(r.phone=!1,t&&(a.classList.remove("_complete"),a.classList.add("_error"))),m(!1)}),o.addEventListener("change",()=>{c(o.value,o,!0),m(!1)}),s.addEventListener("change",()=>{c(s.value,s,!0),m(!1)}),l.addEventListener("change",()=>{d(l.value,!0),m(!1)});let _=()=>{r.phone&&r.rating&&!r.showAll&&(r.showAll=!0,r.ratingOld=r.rating,3<r.rating?($('.form__item-wrap[data-option="bed"]').hide(),$('.form__item-wrap[data-option="nice"]').fadeIn()):($('.form__item-wrap[data-option="nice"]').hide(),$('.form__item-wrap[data-option="bed"]').fadeIn()),animationReviews(),$(".form__item-wrap._end-anim").slideDown(),$(".form__btn").fadeIn(),animationEnd()),r.phone&&r.rating&&r.showAll&&(3<r.ratingOld&&r.rating<=3&&(r.ratingOld=r.rating,$('.form__item-wrap[data-option="nice"]').hide(),$('.form__item-wrap[data-option="bed"]').fadeIn(),animationReviews()),r.ratingOld<=3&&3<r.rating&&(r.ratingOld=r.rating,$('.form__item-wrap[data-option="bed"]').hide(),$('.form__item-wrap[data-option="nice"]').fadeIn(),animationReviews()))};$("#form").on("submit",function(e){e.preventDefault();$(this).serialize();m(!0)?alert("Отправка"):alert("Валидация")});let u=$(".body"),p=$("#toggle-menu"),h=$("#mobMenu");p.on("click",()=>{p.toggleClass("_active"),u.toggleClass("_fixed"),h.toggleClass("_open")})},$(function(){$(window).width()});